{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load extras %}

{% block content %}
    <div id="main">
    {% if matching_students %}
        <ul>
            {% for person in matching_students %}
				<article class="post">
					<header>
						<div class="title">
							<h2><a href={% url 'skillMatch:profile' person.user %}>{{ person.user.get_full_name }}</a></h2>
						</div>
						<div class="meta">
							<a href="#" class="author">
								<!-- <span class="name">
									{{ person.name }}
								</span> -->
								<img src="{{ person.picture.url }}" class="img-responsive" />
							</a>
						</div>
					</header>

					<p>Bio: {{ person.bio }}</p>

					{% if person not in user.student.friends.all and person != user.student %}
						{% if user.student|common:person > 1 %}
							{% if user.student|mutual:person > 1 %}
								<p>You have {{ user.student|common:person }} classes and {{ user.student|mutual:person }} friends in common! </p>
							{% elif user.student|mutual:person == 1 %}
								<p>You have {{ user.student|common:person }} classes and 1 friend in common! </p>
							{% else %}
								<p>You have {{ user.student|common:person }} classes in common! </p>
							{% endif %}
						{% elif user.student|common:person == 1 %}
							{% if user.student|mutual:person > 1 %}
								<p>You have 1 class and {{ user.student|mutual:person }} friends in common! </p>
							{% elif user.student|mutual:person == 1 %}
								<p>You have 1 class and 1 friend in common! </p>
							{% else %}
								<p>You have 1 class in common! </p>
							{% endif %}
						{% else %}
							{% if user.student|mutual:person > 1 %}
								<p>You have {{ user.student|mutual:person }} friends in common! </p>
							{% elif user.student|mutual:person == 1 %}
								<p>You have 1 friend in common! </p>
							{% endif %}
						{% endif %}
					{% endif %}

					<footer>
						<ul class="actions">
							<li><a href="single.html" class="button large">Add Friend</a></li>
						</ul>
{#						<ul class="stats">#}
{#							<li><a href="#">General</a></li>#}
{#							<li><a href="#" class="icon fa-heart">28</a></li>#}
{#							<li><a href="#" class="icon fa-comment">128</a></li>#}
{#						</ul>#}
					</footer>
				</article>
            {% endfor %}
		</ul>

	{% elif matching_classes %}
		<ul>
			{% for class in matching_classes %}
				<article class="post">
					<header>
						<div class="title">
							<h2><a href='#'>{{ class }}</a></h2>
						</div>
					</header>
				</article>
			{% endfor %}
		</ul>

	{% elif matching_skills %}
		<ul>
			{% for skill in matching_skills %}
				<article class="post">
					<header>
						<div class="title">
							<h2><a href="#">{{ skill }}</a></h2>
						</div>
					</header>
				</article>
			{% endfor %}
    {% else %}
        No matching results.
    {% endif %}
 </div>
{% endblock %}